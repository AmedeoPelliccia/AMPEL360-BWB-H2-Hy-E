---
description: "ATA 95-20-21 NN_ECS Copilot Coding Agent Instructions"
applyTo: "OPT-IN_FRAMEWORK/N-NEURAL_NETWORKS_USERS_TRACEABILITY/ATA_95-DIGITAL_PRODUCT_PASSPORT_NEURAL_NETWORKS/95-20_Subsystems/95-20-21_NN_ECS/**/*"
---

# ATA 95-20-21 — NN_ECS Copilot Coding Agent Instructions

## 1. Scope of these instructions

These instructions apply when working on:

`OPT-IN_FRAMEWORK/N-NEURAL_NETWORKS_USERS_TRACEABILITY/ATA_95-DIGITAL_PRODUCT_PASSPORT_NEURAL_NETWORKS/95-20_Subsystems/95-20-21_NN_ECS/`

Structure (for reference):

```text
95-20-21_NN_ECS/
├── README.md
├── 95-20-21-001_ECS_NN_Overview.md
├── 95-20-21-002_Cabin_Temp_Predictor.md
├── 95-20-21-003_Air_Quality_Monitor.md
├── 95-20-21-004_HVAC_Optimizer.md
├── 95-20-21-005_Pressure_Control_NN.md
├── 95-20-21-006_Humidity_Management.md
├── 95-20-21-007_CO2_Scrubbing_Optimizer.md
├── 95-20-21-008_Integration_with_ATA_21.md
├── 95-20-21-009_Safety_and_Certification.md
├── 95-20-21-010_Operational_Procedures.md
│
├── DS-AI_CONFORMITY/
│   ├── 95-20-21-A-101_NN-ECS_ConOps_DS-AI-100.md
│   ├── 95-20-21-A-102_NN-ECS_Operational_Domain_ODD_DS-AI-120.md
│   ├── 95-20-21-A-103_NN-ECS_Risk_Assessment_DS-AI-130.md
│   ├── 95-20-21-A-203_NN-ECS_AL_TQL_Allocation_Tables3-5.md
│   ├── 95-20-21-A-104_NN-ECS_Ethics_Assessment_DS-AI-140.md
│   ├── 95-20-21-A-105_NN-ECS_Intended_Behaviour_DS-AI-150.md
│   ├── 95-20-21-A-106_NN-ECS_Learning_Assurance_DS-AI-150.md
│   ├── 95-20-21-A-107_NN-ECS_Continuous_Risk_Assessment_DS-AI-160.md
│   ├── 95-20-21-A-108_NN-ECS_Human_Centred_Design_DS-AI-170.md
│   └── ASSETS/
│       ├── 95-20-21-A-201_NN-ECS_Risk_Matrix_Table2.svg
│       ├── 95-20-21-A-202_NN-ECS_FHA_Hazards_Table_H1-H5.csv
│       ├── 95-20-21-A-204_NN-ECS_OD_ODD_Parameter_Map.md
│       ├── 95-20-21-A-205_NN-ECS_Architecture_View_DS-AI-150.md
│       ├── 95-20-21-A-206_NN-ECS_Data_Lineage_Diagram_ED-324.md
│       ├── 95-20-21-A-207_NN-ECS_Ethics_Checklist_DS-AI-140.csv
│       └── 95-20-21-A-208_NN-ECS_HCD_Principles_and_Usability_Findings.md
│
├── 10_CERTIFICATION/
│   ├── 95-20-21-SAS.md
│   ├── 95-20-21-A-501_DO-178C_Evidence_Package.md
│   ├── Certification/
│   │   └── CM_Records/
│   │       └── 95-20-21-CM_Records.md
│   └── ASSETS/
│       └── Reports/
│           ├── 95-20-21-Verification_Report.md
│           ├── 95-20-21-Coverage_Summary.md
│           └── 95-20-21-Test_Logs/
│
└── ASSETS/
    ├── MODELS/
    ├── DATASETS/
    ├── TRAINING_RUNS/
    └── MISC/
```

The goal: help implement **traceable, certification-oriented NN documentation and light code/config** for the ECS Neural Network subsystem, aligned with ATA 95 and DS-AI/DO-178C style.

---

## 2. General behavior

When operating under this directory, Copilot should:

1. **Prefer editing existing files** over creating new ones, unless a new file is clearly implied by:

   * the directory structure above, or
   * explicit instructions in the file being edited (e.g. "TODO: create 95-20-21-A-206…").

2. **Use only these formats** unless a file already uses something different:

   * Markdown (`.md`) for all narrative documents, reports, and model/dataset cards.
   * YAML (`.yaml`) or JSON (`.json`) for configuration and metadata.
   * CSV (`.csv`) for tables, matrices, and traceability maps.
   * SVG (`.svg`) for diagrams (risk matrices, architecture views, etc.).

3. **Do not invent real-world regulatory text or quote standards verbatim.**

   * Summarise or paraphrase; where normative content is needed, insert placeholders such as:

     * `> [To be completed with official DS-AI-100 text by certification engineer]`.

4. **Maintain traceability and document control**:

   * Do not change file IDs, prefixes (`95-20-21-XXX`, `95-20-21-A-XXX`) or paths without explicit instructions.
   * Always preserve and, if present, update "Document Control" sections (Version, Date, Status, Author, etc.) minimally.

5. **Be conservative with "facts" about the system.**

   * If a requirement, hazard, or performance figure is not documented in this repo, use clearly marked placeholders:

     * e.g. `TBD`, `XX.X`, `H-XX`, `REQ-95-20-21-XXX`.

---

## 3. File naming and ID conventions

When Copilot needs to create new files for 95-20-21:

1. **Top-level functional docs** follow:

   ```text
   95-20-21-0YY_Descriptive_Name.md
   ```

   where `YY` is a 2-digit sequence (e.g. `011`, `012`) and `Descriptive_Name` is PascalCase with `_` as separator.

2. **DS-AI conformity docs** in `DS-AI_CONFORMITY/` use:

   ```text
   95-20-21-A-2XX_Description_DS-AI-XXX.md
   ```

   * `A-1XX` already used by ConOps / domain / risk / ethics / behaviour.
   * For new artefacts in the same family, continue the numbering (e.g. `A-109`, `A-110`) or `A-2XX` for assets / tables.
   * The suffix `DS-AI-XXX` or `ED-324` should match the referenced guideline in the filename where applicable.

3. **Certification artefacts** (under `10_CERTIFICATION/`) follow:

   ```text
   95-20-21-A-5XX_Description.md
   ```

   Example:

   * `95-20-21-A-502_DO-178C_Test_Summary.md`
   * `95-20-21-A-503_Model_Assurance_Plan_ATA_95.md`

4. **Model / dataset artefacts** under `ASSETS/`:

   * Models: `ASSETS/MODELS/95-20-21-M-XXX_<Short_Model_Name>.md` (card) + `.yaml`/`.json` (config).
   * Datasets: `ASSETS/DATASETS/95-20-21-D-XXX_<Short_Dataset_Name>.md` (+ schema `.json` or `.csv`).
   * Training runs: `ASSETS/TRAINING_RUNS/95-20-21-T-XXX_<Run_Name>.md` or `.json`.

5. **Never introduce spaces** in filenames. Use `_` as separator; keep prefix IDs exactly as given.

---

## 4. Content patterns by area

### 4.1 Functional documents (95-20-21-00X_*.md)

For files such as:

* `95-20-21-002_Cabin_Temp_Predictor.md`
* `95-20-21-004_HVAC_Optimizer.md`
* `95-20-21-007_CO2_Scrubbing_Optimizer.md`

Copilot should preserve and, when extending, use the following structure:

```markdown
# <Title>

## 1. Purpose
[What the NN function does for ECS and why it exists.]

## 2. Scope
[Boundaries: which modes, phases of flight, ECS components.]

## 3. Inputs and Outputs
- **Inputs**:
  - Signal name, units, source ATA/system
- **Outputs**:
  - Command/estimate name, units, consumer

## 4. Functional Description
[High-level algorithmic behaviour, not code-level.]

## 5. Safety and Limitations
- Safety-critical behaviours
- Out-of-scope / forbidden usage
- Known limitations and mitigations

## 6. Interfaces and Dependencies
[References to ATA 21, other ATA 95 modules, datasets, models.]

## 7. Traceability
- Linked requirements IDs
- Linked hazards / DS-AI sections
- Linked test artefacts (in 10_CERTIFICATION/ASSETS/Reports)

## 8. Document Control
[Version, Status, Author, Last update]
```

If a section is not yet known, leave a placeholder with `TBD` and a short note.

---

### 4.2 DS-AI_CONFORMITY artefacts

For files under `DS-AI_CONFORMITY/`, Copilot should:

* Maintain the mapping to **DS-AI sections** explicit in the title and headings.
* Keep the document structured as "checklist + narrative", for example:

```markdown
# 95-20-21-A-103 — NN-ECS Risk Assessment (DS-AI-130)

## 1. Objective
[Short statement tied to DS-AI-130 clause.]

## 2. Method
[Reference risk framework used, e.g. FHA, FTA, FMEA – described at high level.]

## 3. Hazard Inventory
[Table or list; if details unknown, create CSV in ASSETS and link it.]

## 4. Risk Evaluation
[How severity/likelihood are defined; link to Risk Matrix asset.]

## 5. Mitigations and Controls
[List model-level and system-level mitigations.]

## 6. Residual Risk and Justification
[Text; use TBD if not yet provided.]

## 7. Traceability
[Links to requirements, tests, and ECS architecture documents.]

## 8. Open Issues
[Explicit TODO items.]

## 9. Document Control
[Version, Status, Author, etc.]
```

For associated assets (e.g. `95-20-21-A-201_NN-ECS_Risk_Matrix_Table2.svg`, `95-20-21-A-202_*.csv`):

* Do not change filenames.
* When editing CSVs, keep header rows stable; add new hazards/rows at the bottom unless a different order is specified.

---

### 4.3 DO-178C / certification evidence (10_CERTIFICATION/)

For:

* `95-20-21-SAS.md`
* `95-20-21-A-501_DO-178C_Evidence_Package.md`
* `ASSETS/Reports/*.md` / `*.csv`

Copilot should:

1. Keep the **DO-178C structure**: PSAC, SCMP, SQAP, SVP, etc., as section headings or bullet points.

2. When asked to extend, provide **structure and wording**, not fake evidence:

   * e.g. "This section will summarise the SVP; tests are referenced from `95-20-21-Test_Logs/`."

3. For verification artefacts:

   * Use CSV with headers like:

     ```csv
     Test_ID,Requirement_ID,Description,Status,Evidence_Path,Comments
     ```

   * Link back to existing requirement IDs and report files using relative paths.

4. For **coverage summaries**, prefer:

   ```csv
   Code_Unit,Coverage_Type,Target_Percent,Achieved_Percent,Status,Notes
   ```

   and mark unknown values as `TBD`.

---

### 4.4 Models, datasets, training runs (ASSETS/)

Copilot should use standard "card" style templates.

#### Model card (Markdown)

For `ASSETS/MODELS/95-20-21-M-001_ECS_Cabin_Temp_Model.md`:

```markdown
# 95-20-21-M-001 — ECS Cabin Temperature Model

## 1. Overview
[Short description, link to functional doc.]

## 2. Intended Use
[Where in ECS this model is used; operating conditions.]

## 3. Limitations
[Known limitations; out-of-distribution constraints.]

## 4. Input Features
[Table with name, type, units, source, pre-processing.]

## 5. Outputs
[Description of outputs and their meaning.]

## 6. Training Data
[Link to dataset cards and schemas.]

## 7. Training Procedure
[High-level: algorithm family, loss, hyperparameters.]

## 8. Validation and Testing
[Metrics summary; link to training runs.]

## 9. Safety & Ethics Considerations
[Bias, failure modes, fallback behaviour.]

## 10. Traceability
[Requirements, DS-AI sections, certification artefacts.]

## 11. Document Control
[Version, Status, Author, Last update.]
```

#### Dataset card (Markdown)

For `ASSETS/DATASETS/95-20-21-D-001_ECS_Operational_Logs.md`:

```markdown
# 95-20-21-D-001 — ECS Operational Logs Dataset

## 1. Source and Collection
[Where data comes from; simulated vs real, time windows.]

## 2. Schema
[Refer to `.json` or `.csv` schema file; list key fields.]

## 3. Preprocessing
[Filtering, anonymisation/pseudonymisation steps.]

## 4. Quality Checks
[Validation rules; missing data handling.]

## 5. Usage
[Which models use this dataset.]

## 6. Governance and Retention
[Who owns, retention policies, update cadence.]

## 7. Compliance Notes
[DS-AI / data protection pointers.]

## 8. Document Control
[Version, Status, Author, Last update.]
```

#### Training run record

For `ASSETS/TRAINING_RUNS/95-20-21-T-001_Baseline_Training_Run.md` or `.json`:

* Always include:

  * model id, dataset id(s), git commit hash, random seed, key hyperparameters, key metrics.

Example JSON:

```json
{
  "training_run_id": "95-20-21-T-001",
  "model_id": "95-20-21-M-001",
  "dataset_ids": ["95-20-21-D-001"],
  "git_commit": "TBD_COMMIT_HASH",
  "framework": "pytorch",
  "hyperparameters": {
    "learning_rate": 0.001,
    "batch_size": 256,
    "epochs": 50
  },
  "metrics": {
    "val_mae": 0.35,
    "val_rmse": 0.52
  },
  "seed": 1234,
  "training_date": "TBD",
  "notes": "TBD - to be updated with actual run details."
}
```

If real values are not known, keep them as `TBD` with a comment in the surrounding documentation.

---

## 5. Coding guidelines (when writing code/config for 95-20-21)

When Copilot writes code (e.g. small utilities, scripts, configs) for this area:

1. **Languages**:

   * Prefer Python for scripts.
   * YAML/JSON for configuration.
   * Keep scripts small, single-purpose, and well-documented.

2. **Style**:

   * Follow PEP 8 for Python (spacing, naming).
   * Use explicit imports and type hints where reasonable.
   * Always include a short module-level docstring describing purpose and relation to 95-20-21.

3. **Reproducibility**:

   * When dealing with training/evaluation scripts, always:

     * set random seeds;
     * accept configuration via parameters or config files;
     * write minimal logging to stdout or simple log files.

4. **Safety**:

   * Do not hard-code file paths outside this repo.
   * Do not embed secrets, tokens, or infrastructure details.
   * Avoid non-deterministic behaviour without a clear note explaining why it is required.

---

## 6. Traceability and cross-references

When adding or editing content, Copilot should:

1. **Cross-link artefacts using relative paths**, for example:

   ```markdown
   See verification evidence in
   [`10_CERTIFICATION/ASSETS/Reports/95-20-21-Verification_Report.md`](./10_CERTIFICATION/ASSETS/Reports/95-20-21-Verification_Report.md).
   ```

2. **Maintain ID references** consistently:

   * Requirements: `REQ-95-20-21-XXX`.
   * Hazards: `H-95-20-21-XX`.
   * Tests: `TEST-95-20-21-XXX`.
   * Model/dataset/training IDs as per sections above.

3. **Never silently delete IDs**. If an ID becomes obsolete, mark it explicitly as such in a "Status" or "Notes" column or a "Deprecated" section.

---

## 7. When unsure

If necessary information is not present in the repository:

* Prefer to:

  * introduce clearly marked `TBD` sections;
  * add a short comment such as:

    * "To be completed by ECS NN domain expert / certification engineer."

Do **not** invent operational limits, safety margins, or regulatory text that could be mistaken for validated data.

---

End of 95-20-21 NN_ECS Copilot Coding Agent Instructions.
