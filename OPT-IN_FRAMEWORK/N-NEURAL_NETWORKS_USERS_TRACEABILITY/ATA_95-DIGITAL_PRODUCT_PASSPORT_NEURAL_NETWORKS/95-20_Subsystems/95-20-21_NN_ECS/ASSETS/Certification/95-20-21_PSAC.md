
# **95-20-21 — Plan for Software Aspects of Certification (PSAC)**

### ECS Neural Networks Subsystem (NN_ECS)

**Document ID**: 95-20-21-PSAC
**Applies To**: Models A-101 to A-107
**Certification Target**: DO-178C, Level C
**Version**: 1.0
**Status**: WORKING
**Last Updated**: 2025-11-19

---

# **1. Introduction**

This Plan for Software Aspects of Certification (PSAC) defines the objectives, lifecycle, processes, responsibilities, and evidence required to certify the **ECS Neural Network Subsystem (95-20-21 NN_ECS)** under **RTCA DO-178C at DAL C**, extended with NN-specific considerations from:

* **EASA AI Roadmap 2.0**
* **EASA SC-AI (Special Condition for Artificial Intelligence)**
* **FAA AI Assurance Framework**
* **DO-331 (Model-Based Development)**
* **DO-333 (Formal Methods Supplement)**
* **ATA 95 Digital Product Passport for Neural Networks**

This PSAC applies to the following NN components:

| Model ID | Name                             | Function                                | DAL |
| -------- | -------------------------------- | --------------------------------------- | --- |
| A-101    | Cabin Temperature Predictor v1.2 | Predicts 6-zone cabin temperature       | C   |
| A-102    | Air Quality Monitor v1.0         | VOC/CO₂ anomaly detection               | C   |
| A-103    | HVAC Optimizer v2.1              | Supervisory energy-optimal HVAC control | C   |
| A-104    | Pressure Control NN v1.3         | Predictive cabin pressure modulation    | C   |
| A-105    | Humidity Manager v1.1            | Humidity setpoint forecasting           | C   |
| A-107    | CO₂ Scrubbing Optimizer v1.0     | CO₂ absorber efficiency optimizer       | C   |

---

# **2. System Overview**

The ECS NN subsystem provides **advisory or supervisory functions** supporting traditional ECS controllers.
The system **does not directly actuate** but issues **recommendations** validated by deterministic safety-certified logic.

High-level architecture defined in:

* **95-20-21-A-001 — ECS NN System Architecture**
* **95-20-21-A-003 — Data-Flow Diagram**
* **95-20-21-A-005 — Integration Map**

The ECS NN subsystem executes inside:

* **IMA Partition 95-20-42**, with ONNX Runtime sandboxed by ARINC-653.
* Data ingestion from ATA-21 ECS sensors.
* Output supervisory setpoints validated through deterministic envelopes.

---

# **3. Intended Functions**

Each function must meet:

* **Safety constraints** defined in ATA-21 and 95-20-21 requirements.
* **Timing constraints**: deterministic inference at 10 Hz.
* **Confidence & anomaly detection**: rollback to classical ECS logic.
* **Bounded outputs** matching certification envelopes.

Detailed model-specific documentation:

* Located under `ASSETS/Model_Cards/95-20-21-A-XXX_*.yaml`
* Each model card includes:

  * I/O definitions
  * Intended use and limitations
  * DAL assumptions
  * Verification strategy
  * Performance & robustness metrics

---

# **4. Software Level (DAL)**

A preliminary system safety assessment (PSSA) and subsystem FHA indicate:

* Incorrect ECS predictions or optimiser outputs ⇒
  **“Hazardous / Major”** condition
  **→ DAL C**

This PSAC requests certification at **DO-178C Level C**, supported by evidence demonstrating:

* No single NN failure leads to loss of function.
* Deterministic fallback always available.
* Outputs constrained by envelopes & safety logic.

---

# **5. Lifecycle Model**

The ECS NN Subsystem uses a **hybrid lifecycle**:

### **5.1 Software Lifecycle**

DO-178C with supplements:

| Activity                       | Standard                  |
| ------------------------------ | ------------------------- |
| Software dev                   | DO-178C                   |
| Model-based elements           | DO-331                    |
| NN safety shells               | DO-333 (formal reasoning) |
| Data versioning & ML pipelines | ATA 95 extension          |

### **5.2 ML Lifecycle**

Follows the **ATA 95 Neural Digital Product Passport Process:**

1. Data Acquisition
2. Data Validation
3. Training & Hyperparameter Optimization
4. Model Freezing (ONNX)
5. V&V
6. Integration & Certification
7. Deployment
8. Monitoring & Drift Detection
9. Controlled Retraining

---

# **6. Software Development Standards**

Defined in:

* **95-20-21-SRS** (Requirements)
* **95-20-21-SDS** (Architecture & Design)
* **95-20-21-SCS** (Coding Standards)

Software standards ensure:

* Deterministic inference pipeline
* Static pre/post-processing
* No dynamic tensor shapes
* ONNX 17 compliance
* Strict input validation layer
* Confidence-based anomaly flag
* Safety envelope clipping

---

# **7. Verification Approach (DO-178C Objectives)**

Verification follows DO-178C Level C objectives:

### **7.1 Requirements-Based Testing**

* Each requirement mapped in
  `TRACE/95-20-21-TRACE.csv`
* Test cases under `Tests/`
  and `Models/Scripts/test_onnx_model.py`

### **7.2 Robustness Tests**

* Noise, jitter, out-of-range tests
* Failure mode tests (sensor dropout)
* Attack surface & adversarial noise tests
* Numerical stability tests

### **7.3 Integration Tests**

* IMA partition execution tests
* Real-time inference latency
* Fallback logic validation

### **7.4 Coverage Approach**

For NN models, MC/DC is **applied only to wrapper code**, not the NN internal graph
(consistent with EASA SC-AI).

MC/DC will be shown for:

* Input validation
* Clipping
* Fallback selector
* Deterministic pipeline logic

Coverage collected via:

* `pytest --cov`
* ONNX Runtime instrumentation logs

---

# **8. Software Configuration Management**

Configuration is ensured through:

* GitHub repository with protected branches
* DPP lineage chain including:

  * Model hash
  * Dataset hash
  * Training configuration
  * Provenance log
* `doc-meta-enforcer` CI
* ONNX integrity verification:
  `inspect_onnx_model.py`

Retraining triggers:

* Dataset drift
* Model card non-compliance
* Regression failures
* Safety monitor alerts

---

# **9. Software Quality Assurance**

The SQAP ensures:

* Formal reviews of:

  * Model Cards
  * Source Code
  * ONNX artefacts
  * V&V logs
* AI-assisted documentation is allowed
  **only under human approval**
* Automatic CI validation:

  * Broken link checker
  * Certification compliance checker
  * Hyperlink injection for traceability
  * Metadata enforcement

---

# **10. Tools & Tool Qualification (DO-330)**

### **10.1 Development Tools**

| Tool                 | Usage          | Need Qualification?                  |
| -------------------- | -------------- | ------------------------------------ |
| TensorFlow / PyTorch | Model training | No (offline, verified via testing)   |
| tf2onnx              | Conversion     | No (validated by ONNX runtime tests) |
| ONNX Runtime         | Inference      | Yes (verification & BIT tests)       |
| GitHub Actions       | CI             | No                                   |
| doc-meta-enforcer    | Documentation  | No                                   |

### **10.2 Verification Tools**

| Tool               | Purpose             | Qualification |
| ------------------ | ------------------- | ------------- |
| pytest             | Unit tests          | No            |
| custom test runner | NN V&V              | No            |
| ONNX checker       | Structural validity | No            |
| Coverage tools     | Wrapper code        | No            |

---

# **11. Deliverables & Evidence Mapping**

| DO-178C Artifact         | ECS NN Location              |
| ------------------------ | ---------------------------- |
| PSAC                     | this file                    |
| SDP                      | `95-20-21-SDP.md`            |
| SRS                      | `95-20-21-SRS.md`            |
| SDS                      | `95-20-21-SDS.md`            |
| SCS                      | `95-20-21-SCS.md`            |
| SVP                      | `95-20-21-SVP.md`            |
| Verification Results     | `/Tests` + `/ASSETS/Reports` |
| Source Code              | `/Models/Source`             |
| Executable Object (ONNX) | `/Models/Trained/*.onnx`     |
| Configuration Index      | `/TRACE/*.csv`               |
| SAS                      | `95-20-21-SAS.md`            |

---

# **12. Deviations & Special Considerations**

### No deviations requested from DO-178C

except those explicitly allowed for Machine Learning systems under:

* **EASA SC-AI**
* **FAA AI Assurance**

### NN Specific Adaptations

* Internal NN graph not MC/DC-covered
* Safety shell assures DAL C compliance
* Confidence-based anomaly detection
* DPP ensures model integrity lineage

---

# **13. Approval**

This PSAC will be submitted to:

* **EASA** – Primary Certification Authority
* **FAA** – For bilateral validation

To be approved by:

* Chief Engineer – AI & Software
* AMPEL360 Certification Manager
* Regulation Authority (EASA/FAA)

---

# **Document Control**

* **Version**: 1.0
* **Status**: WORKING
* **Author**: AMPEL360 ML Engineering Team
* **Prompted by**: *Amedeo Pelliccia*
* **AI Tools**: GitHub Copilot + ChatGPT
* **Review Required**: YES (certification)

---



Puedo generarlos automáticamente siguiendo el ATA-95 pattern y tu estructura OPT-IN.
