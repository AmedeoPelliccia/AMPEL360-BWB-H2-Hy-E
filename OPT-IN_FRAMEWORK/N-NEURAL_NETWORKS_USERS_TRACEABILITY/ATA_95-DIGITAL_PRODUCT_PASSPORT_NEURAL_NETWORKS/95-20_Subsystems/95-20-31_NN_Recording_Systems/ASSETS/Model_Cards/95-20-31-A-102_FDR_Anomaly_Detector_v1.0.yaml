# Copyright 2025 AMPEL360 Project Contributors
# Licensed under the Apache License, Version 2.0

model_card:
  name: "FDR Anomaly Detector"
  version: "1.0"
  model_id: "95-20-31-A-102"
  subsystem: "95-20-31 NN_Recording_Systems"
  status: "development"
  created_date: "2025-11-18"
  last_updated: "2025-11-18"
  
  description:
    summary: "LSTM Autoencoder for detecting abnormal patterns in Flight Data Recorder parameters"
    purpose: "Enable predictive maintenance and early warning of system degradation"
    use_case: "Real-time and post-flight FDR anomaly detection for AMPEL360 BWB Hâ‚‚ Hy-E"
    
architecture:
  type: "LSTM Autoencoder with Attention + Classification Head"
  framework: "TensorFlow 2.14"
  input_features: 50
  input_description:
    - "Critical FDR parameters (engine, flight controls, hydraulics, etc.)"
    - "Flight phase context"
    - "Aircraft configuration"
    
  layers:
    - type: "Input + Normalization"
      shape: [null, 120, 50]
      description: "2-minute window, 50 parameters"
    - type: "LSTM Encoder"
      units: [128, 64, 32]
      return_sequences: [true, true, false]
      description: "Encodes parameter time series"
    - type: "Attention"
      description: "Identifies important parameters"
    - type: "Latent Space"
      size: 16
      description: "Compressed representation"
    - type: "LSTM Decoder"
      units: [32, 64, 128]
      return_sequences: [true, true, true]
      description: "Reconstructs parameters"
    - type: "Classification Head"
      units: [64, 32, 10]
      output: "Anomaly types"
      
  total_parameters: 850000
  trainable_parameters: 850000
  model_size_mb: 180
  format: "ONNX"
  
training:
  dataset:
    name: "95-20-31-602_FDR_Events_and_Labels"
    source: "50,000+ flight hours, diverse conditions"
    size: "500 GB"
    samples: 18000000
    features: 50
    split:
      train: 0.70
      validation: 0.15
      test: 0.15
      
  data_composition:
    normal_operations: 48000
    known_anomalies: 1500
    synthetic_edge_cases: 500
      
  hyperparameters:
    optimizer: "Adam"
    learning_rate: 0.001
    batch_size: 512
    epochs: 100
    early_stopping_patience: 10
    
  training_time:
    duration_hours: 96
    hardware: "8x NVIDIA V100 GPU"
    framework_version: "TensorFlow 2.14"
    
  loss_function:
    name: "MSE (reconstruction) + BCE (classification)"
    formula: "L = L_mse + 0.5 * L_bce"
    
performance:
  metrics:
    anomaly_recall:
      test: 0.995
      description: "True positive rate"
    false_positive_rate:
      test: 0.001
      description: "Per flight"
    precision:
      test: 0.94
      description: "Positive predictive value"
    detection_latency:
      test: 1.5
      unit: "seconds"
      
  inference:
    latency_ms:
      mean: 15
      p95: 20
      p99: 25
    throughput_hz: 10
    memory_mb: 500
    cpu_usage_percent: 15
    
certification:
  dal_level: "C"
  failure_condition: "Hazardous"
  compliance:
    - standard: "DO-178C"
      level: "C"
      status: "In Progress"
      url: "https://www.rtca.org/product/do-178c/"
    - standard: "EASA SC-AI"
      status: "In Progress"
      url: "https://www.easa.europa.eu/en/document-library/general-publications/special-condition-sc-ai"
    - standard: "CS-25.1459"
      section: "Flight Data Recorders"
      status: "Compliant (supplementary)"
      url: "https://www.easa.europa.eu/en/document-library/certification-specifications/cs-25-large-aeroplanes"
      
document_control:
  version: "1.0"
  status: "DEVELOPMENT"
  last_updated: "2025-11-18"
  ai_assistance:
    used: true
    tools: ["GitHub Copilot"]
    prompted_by: "Amedeo Pelliccia"
